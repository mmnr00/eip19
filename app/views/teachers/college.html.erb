<h3> Viewing College for <%= @teacher.username %> </h3>

<% if @teacher.colleges.present? %>
<div class="row">
  <div class="col-md-12">
    <div class="grid simple ">
      <div class="grid-title no-border">
        <caption> <h3 align="center"> MY COLLEGES</h3> </caption>
        <!-- <div class="tools">
          <a href="javascript:;" class="collapse"></a>
          <a href="#grid-config" data-toggle="modal" class="config"></a>
          <a href="javascript:;" class="reload"></a>
          <a href="javascript:;" class="remove"></a>
        </div> -->
      </div>
      <div class="grid-body no-border">
<div class="card-body">
              <div class="table-responsive">
<table class="table table-striped table-bordered" id="dataTable" width="100%" cellspacing="0">
	<table class="table table-striped table-bordered">
			<thead>
				<tr>
					<th> College Name </th>
					<th> Payment Status </th>
          <th> Action </th>
				</tr>
				<% @teacher.colleges.each do |college| %>
          <% unpaid = false %>
          <% has_bills = false %>
					<tbody>
						<tr>
							<td><%= college.name %></td>
							<td>
                <% college.courses.each do |course| %>
                  <% if course.payments.where(paid: false, teacher_id: @teacher.id).present? %>
                    <% unpaid = true %>
                  <% end %>
                  <% if course.payments.where(teacher_id: @teacher.id).present? %>
                    <% has_bills = true %>
                  <% end %>
                <% end %>
                <% if unpaid %>
                  <%= link_to "UNPAID", "#", class: "btn btn-sm btn-success active" %> 
                <% elsif !has_bills %>
                  No Bills Created 
                <% else %>
                  <%= link_to "PAID", "#", class: "btn btn-sm btn-success active" %> 
                <% end %>
              </td>
              <td>
                <%= link_to "View College", show_teacher_path(@teacher, college: college), class: "btn btn-sm btn-primary active" %> &nbsp
                <%= link_to "Remove", remove_college_path(@teacher, college: college), class: "btn btn-sm btn-danger active", method: :post %>
              </td>
						</tr>
					</tbody>
				<% end %>
			</thead>
		</table>
</div>
</div>
</div>
</div>
</div>
</div>

<% else %>
	No Colleges to display. Please add college below
<% end %>

<div class="row">
  <div class="col-md-12">
    <div class="grid simple ">
      <div class="grid-title no-border">
        <caption> <h3 align="center">ADD NEW COLLEGE</h3> </caption>
        <!-- <div class="tools">
          <a href="javascript:;" class="collapse"></a>
          <a href="#grid-config" data-toggle="modal" class="config"></a>
          <a href="javascript:;" class="reload"></a>
          <a href="javascript:;" class="remove"></a>
        </div> -->
      </div>
      <div class="grid-body no-border">
<div class="card-body">
              <div class="table-responsive">
<table class="table table-striped table-bordered" id="dataTable" width="100%" cellspacing="0">
	<thead>
		<tr>
			<th><h4 align="center">COLLEGE NAME</h4></th>
			<th><h4 align="center">ACTION</h4></th>
		</tr>
    
			<tbody>
				<% @college_list.each do |college| %>
				<tr>
					<td><%= college.name %></td>
					<% if !@teacher.colleges.where(id: college.id).present? %>
						<td>
							<p align="center"><%= link_to "Add College", add_college_path(college: college), class: "btn btn-sm btn-primary active", method: :post %></p>
						</td>
					<% else %>
						<td>
							<p align="center"><button class= "btn btn-sm btn-success active">Already Added</button></p>
						</td>
					<% end %>
				</tr>
				 <% end %>
			</tbody>

		
	</thead>
</table>

<%= render 'js-script/datatables-demo' %>
<%= render 'js-script/jquery-datatables' %>

