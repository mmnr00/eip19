<h3> Viewing College for <%= @teacher.username %> </h3>

<% if @teacher.colleges.present? %>
	<table class="table table-striped">
			<thead>
				<tr>
					<th> College Name </th>
					<th> Payment Status </th>
          <th> Action </th>
				</tr>
				<% @teacher.colleges.each do |college| %>
          <% unpaid = false %>
          <% has_bills = false %>
					<tbody>
						<tr>
							<td><%= college.name %></td>
							<td>
                <% college.courses.each do |course| %>
                  <% if course.payments.where(paid: false, teacher_id: @teacher.id).present? %>
                    <% unpaid = true %>
                  <% end %>
                  <% if course.payments.where(teacher_id: @teacher.id).present? %>
                    <% has_bills = true %>
                  <% end %>
                <% end %>
                <% if unpaid %>
                  <%= link_to "UNPAID", "#", class: "btn btn-sm btn-success active" %> 
                <% elsif !has_bills %>
                  No Bills Created 
                <% else %>
                  <%= link_to "PAID", "#", class: "btn btn-sm btn-success active" %> 
                <% end %>
              </td>
              <td>
                <%= link_to "View College", show_teacher_path(@teacher, college: college), class: "btn btn-sm btn-primary active" %> &nbsp
                <%= link_to "Remove", remove_college_path(@teacher, college: college), class: "btn btn-sm btn-danger active", method: :post %>
              </td>
						</tr>
					</tbody>
				<% end %>
			</thead>
		</table>
<% else %>
	No Colleges to display. Please add college below
<% end %>

<caption> Add New College </caption>
<table class="table table-striped">
	<thead>
		<tr>
			<th> College Name </th>
			<th> Action </th>
		</tr>
			<tbody>
				<% @college_list.each do |college| %>
				<tr>
					<td><%= college.name %></td>
					<% if !@teacher.colleges.where(id: college.id).present? %>
						<td>
							<%= link_to "Add College", add_college_path(college: college), class: "btn btn-xs btn-primary active", method: :post %>
						</td>
					<% else %>
						<td>
							<button class= "btn btn-sm btn-success active">Already Added</button></br></br>
						</td>
					<% end %>
				</tr>
				<% end %>
			</tbody>
		
	</thead>
</table>

