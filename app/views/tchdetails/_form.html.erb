<div class='row'>
  <div class='col-lg-8 col-12'>
    <%= form_for(@tchdetail, :html => {multipart: true, class: "form-horizontal", role: "form"}) do |f| %>
        
        <div class="form-group"> <!-- name -->
          <div class="row">
            <div class="control-label col-sm-8">
              <strong>NAME</strong>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-8 col-12">
              <%= f.text_field :name, class: "form-control", placeholder: "YOUR FULL NAME AS PER IC", autofocus: true, required: true %>
            </div>
          </div>
        </div>

        <!-- PROFILE PIC -->
        <% m = 0 %> <!-- Stop loop at 1 -->
        <div class="form-group"> 
          <div class="row">
            <div class="control-label col-sm-8">
              <strong>PROFILE PIC</strong>
            </div>
          </div>
          <div class="row">
          <div class="col-sm-8 col-5">
          <% image = @tchdetail.fotos.where(foto_name: "PROFILE PIC").first %>
          <% if image.present? %>
            <%= image_tag(image.picture.url, size: "200x200") if image.picture? %>
              <div class="row">
              <div class="col-sm-8 col-5">
                <strong><%= link_to "EDIT", edit_foto_path(image.id), class: "btn btn-sm btn-success active" %></strong>
              </div>
              </div>  
          <% else %>
            <%= f.fields_for :fotos do |h| %>
              <% break if m==1 %>
                <div class="row">
                  <div class="col-sm-8 col-8">
                    <%= h.hidden_field :foto_name, value: "PROFILE PIC" %>
                    <%= h.file_field :picture, accept: 'image/jpeg,image/gif,image/png' %>
                  </div>
                </div>
                <% m = 1 %>
              <% end %>
            <% end %>
          </div>
          </div>
        </div>
        <% k = 1 %>
        <div class="form-group"> <!-- IC -->
          <div class="row">
            <div class="control-label col-sm-8">
              <strong>I/C NO</strong>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-3 col-4">
              <%= f.text_field :ic_1, maxlength: 6 ,class: "form-control", autofocus: true, required: true %>
            </div> <strong>-</strong>
            <div class="col-sm-2 col-3">
             <%= f.text_field :ic_2, maxlength: 2, class: "form-control", placeholder: "", autofocus: true, required: true %>
            </div> <strong>-</strong>
            <div class="col-sm-3 col-4">
              <%= f.text_field :ic_3, maxlength: 4, class: "form-control", placeholder: "", autofocus: true, required: true %>
            </div>         
          </div>
        </div>

        <!-- GENDER -->
        <div class="form-group"> 
          <div class="row">
            <div class="control-label col-sm-8">
              <i class="fas fa-caret-down"></i><strong> GENDER</strong>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-8 col-8">
              <%= f.select :gender, options_for_select(["MALE",
                                                        "FEMALE"],
                                                        selected: @tchdetail.gender),
              {include_blank: "Please Select"}, {required: true} %>          
            </div>
          </div>
        </div>

        <% if 1==0 %>
          <!-- EMAIL -->
          <div class="form-group"> 
            <div class="row">
              <div class="control-label col-sm-8">
                <strong>EMAIL</strong>
              </div>
            </div>
            <div class="row">
              <div class="col-sm-8 col-12">
                <%= f.email_field :email, required: true %>
              </div>
            </div>
          </div>
        <% end %>

        <!-- DOB -->
        <div class="form-group"> 
          <div class="row">
            <div class="control-label col-sm-8">
              <strong>DATE OF BIRTH</strong>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-8 col-12">
              <%= f.date_select :dob, 
                                {order:[:day, :month, :year],
                                prompt: { day: 'DAY', month: 'MONTH', year: 'YEAR' },
                                start_year: 1950,
                                selected: @tchdetail.dob}, 
                                {required: true} %>
            </div>
          </div>
        </div>

        <!-- HOUSEHOLD INCOME-->
        <% if params[:anis] == "true" %><div class="form-group"> 
          <div class="row">
            <div class="control-label col-sm-8">
              <i class="fas fa-caret-down"></i><strong> MONTHLY HOUSEHOLD INCOME</strong>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-8 col-8">
              <%= f.select :income, options_for_select(["RM10,001 and above", 
                                                        "RM5,001 to RM10,000", 
                                                        "RM5,000 and below",
                                                        "Others"],
                                                        selected: @tchdetail.income),
              {include_blank: "Please Select"}, {required: true} %>          
            </div>
          </div>
        </div><% end %>

        <div class="form-group"> <!-- PHONE-->
          <div class="row">
            <div class="control-label col-sm-8">
              <strong>PHONE NUMBER</strong>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-2 col-3">
             <%= f.text_field  :phone_1, maxlength: 3, class: "form-control", autofocus: true, required: true %><font size="2"> Area </font> 
            </div>
            -
            <div class="col-sm-3 col-5">
              <%= f.text_field  :phone_2, maxlength: 8, class: "form-control", autofocus: true, required: true %><font size="2"> Phone Number </font> 
            </div>
          </div>
        </div>

        <div class="form-group"> <!-- ADDRESS-->
          <div class="row">
            <div class="control-label col-sm-8">
              <strong>CURRENT ADDRESS</strong>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-8 col-12">
             <%= f.text_field :address_1, class: "form-control", autofocus: true, required: true %> <font size="2"> &nbsp </font>
            </div>
            <div class="col-sm-8 col-12">
             <%= f.text_field :address_2, class: "form-control", autofocus: true %> <font size="2"> &nbsp </font>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-3 col-6">
             <%= f.text_field :city, class: "form-control", autofocus: true, required: true %> <font size="2"> City </font>
            </div>
            <div class="col-sm-3 col-5">
             <%= f.text_field :states, class: "form-control", autofocus: true, required: true %> <font size="2"> States </font>
            </div>
            <div class="col-sm-2 col-4">
             <%= f.number_field :postcode, class: "form-control", autofocus: true, required: true %> <font size="2"> Postcode </font>
            </div>
          </div>
        </div>

        <div class="form-group"> <!-- MARITAL-->
          <div class="row">
            <div class="control-label col-sm-8">
              <strong>CURRENT EMPLOYER</strong>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-8 col-8">
              <%= f.text_field :marital, class: "form-control", autofocus: true, required: true %>          
            </div>
          </div>
        </div>

        <div class="form-group"> <!-- CATEGORY-->
          <div class="row">
            <div class="control-label col-sm-8">
              <strong>CERTIFICATION NO</strong>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-8 col-8">
              <%= f.text_field :category, class: "form-control", autofocus: true, required: true %>          
            </div>
          </div>
        </div>

        

        
        <!-- START PHOTO UPLOAD -->
        
        <!-- IC FRONT -->
      <% m = 0 %> <!-- Stop loop at 1 -->
      <div class="form-group"> 
        <div class="row">
          <div class="control-label col-sm-8">
            <strong>CERTIFICATION DOCUMENT</strong>
          </div>
        </div>
        <div class="row">
        <div class="col-sm-8 col-5">
        <% image = @tchdetail.fotos.where(foto_name: "CERT").first %>
        <% if image.present? %>
          <a href="<%="#{image.picture.url}"%>" target="_blank">
            <%= image_tag(image.picture.url, size: "200x200") if image.picture? %>
          </a>
            <div class="row">
            <div class="col-sm-8 col-5">
              <strong><%= link_to "EDIT", edit_foto_path(image.id), class: "btn btn-sm btn-success active" %></strong>
            </div>
            </div>  
        <% else %>
          <%= f.fields_for :fotos do |h| %>
            <% break if m==1 %>
              <div class="row">
                <div class="col-sm-8 col-8">
                  <%= h.hidden_field :foto_name, value: "CERT" %>
                  <%= h.file_field :picture, accept: 'image/jpeg,image/gif,image/png,application/pdf' %>
                </div>
              </div>
              <% m = 1 %>
            <% end %>
        <% end %>
        </div>
        </div>
      </div>

      <% if 1== 0 %>
       <!-- IC BACK -->
      <% m = 0 %> <!-- Stop loop at 1 -->
      <div class="form-group"> 
        <div class="row">
          <div class="control-label col-sm-8">
            <strong>IC BACK</strong>
          </div>
        </div>
        <div class="row">
        <div class="col-sm-8 col-5">
        <% image = @tchdetail.fotos.where(foto_name: "IC BACK").first %>
        <% if image.present? %>
          <%= image_tag(image.picture.url, size: "200x200") if image.picture? %>
            <div class="row">
            <div class="col-sm-8 col-5">
              <strong><%= link_to "EDIT", edit_foto_path(image.id), class: "btn btn-sm btn-success active" %></strong>
            </div>
            </div>  
        <% else %>
          <%= f.fields_for :fotos do |h| %>
            <% break if m==1 %>
              <div class="row">
                <div class="col-sm-8 col-8">
                  <%= h.hidden_field :foto_name, value: "IC BACK" %>
                  <%= h.file_field :picture, accept: 'image/jpeg,image/gif,image/png' %>
                </div>
              </div>
              <% m = 1 %>
            <% end %>
        <% end %>
        </div>
        </div>
      </div>

      <!-- PROFILE PIC -->
      <% m = 0 %> <!-- Stop loop at 1 -->
      <div class="form-group"> 
        <div class="row">
          <div class="control-label col-sm-8">
            <strong>PROFILE PIC</strong>
          </div>
        </div>
        <div class="row">
        <div class="col-sm-8 col-5">
        <% image = @tchdetail.fotos.where(foto_name: "PROFILE PIC").first %>
        <% if image.present? %>
          <%= image_tag(image.picture.url, size: "200x200") if image.picture? %>
            <div class="row">
            <div class="col-sm-8 col-5">
              <strong><%= link_to "EDIT", edit_foto_path(image.id), class: "btn btn-sm btn-success active" %></strong>
            </div>
            </div>  
        <% else %>
          <%= f.fields_for :fotos do |h| %>
            <% break if m==1 %>
              <div class="row">
                <div class="col-sm-8 col-8">
                  <%= h.hidden_field :foto_name, value: "PROFILE PIC" %>
                  <%= h.file_field :picture, accept: 'image/jpeg,image/gif,image/png' %>
                </div>
              </div>
              <% m = 1 %>
            <% end %>
          <% end %>
        </div>
        </div>
      </div>

      <% end %>

      <%= f.hidden_field :teacher_id, value: params[:teacher_id] %>
      

              
        <div class="form-group">
          <div class="row">
            <div class="col-sm-offset-2 col-sm-10 col-4">
              <%= f.submit :"UPDATE PROFILE",  class: 'btn btn-primary btn-lg' %>
            </div>
          </div>
        </div>
      <% end %>
      
    </div>
  </div>