<h2><%= @sce.name %></h2>
<h5><%= @sce.date.strftime('%d-%^b-%y') %></h5>
<h5><%= @sce.venue %></h5>

<% @stel.count %>
<h4>NO OF CHILDRENS :  <%= @ekids.where(stat: "CONF").count %></h4>
<%= link_to "GO TO SUMMARY PAGE", sce_path(id: @sce.id), class: "btn btn-sm btn-warning" %>
<%
  clrs="success"
  clra="success"
  clrp="success"
  clro="success"
  clrd="success"

  clrs="danger" unless @stel.has_value?(false)
  clra="danger" unless @atel.has_value?(false)
  clrp="danger" unless @ptel.has_value?(false)
  clro="danger" unless @otel.has_value?(false)
  clrd="danger" unless @dtel.has_value?(false)

  cnts=0;cnta=0;cntp=0;cnto=0;cntd=0
  @stel.each do |k,v| cnts+=1 if v==false end
  @atel.each do |k,v| cnta+=1 if v==false end
  @ptel.each do |k,v| cntp+=1 if v==false end
  @otel.each do |k,v| cnto+=1 if v==false end
  @dtel.each do |k,v| cntd+=1 if v==false end

  szs="sm";sza="sm";szp="sm";szo="sm";szd="sm";
  szs="lg" unless params[:rm] != "st"
  sza="lg" unless params[:rm] != "at"
  szp="lg" unless params[:rm] != "pt"
  szo="lg" unless params[:rm] != "ot"
  szd="lg" unless params[:rm] != "dt"
%>


<%= link_to "SPEECH THERAPIST (#{cnts})", showstat_path(id: @sce.id, rm: "st"), class: "btn btn-#{szs} btn-#{clrs}" %>
<%= link_to "AUDIOLOGIST (#{cnta})", showstat_path(id: @sce.id, rm: "at"), class: "btn btn-#{sza} btn-#{clra}" %>
<%= link_to "PHYSIO THERAPIST (#{cntp})", showstat_path(id: @sce.id, rm: "pt"), class: "btn btn-#{szp} btn-#{clrp}" %>
<%= link_to "OCCUPATIONAL THERAPIST (#{cnto})", showstat_path(id: @sce.id, rm: "ot"), class: "btn btn-#{szo} btn-#{clro}" %>
<%= link_to "DOCTOR (#{cntd})", showstat_path(id: @sce.id, rm: "dt"), class: "btn btn-#{szd} btn-#{clrd}" %>
<br><br>

<div class="table-responsive">
  <table class="table table-striped table-bordered" width="100%" cellspacing="0">

    <thead>
      <tr>
        <th style="background-color:#b2b2ff">SESSION</th>
        <th style="background-color:#b2b2ff">PENDING</th>
        <th style="background-color:#b2b2ff">IN SESSION</th>
        <th style="background-color:#b2b2ff">COMPLETED</th>
      </tr>
    </thead>

    <tbody>

      <% if params[:rm] == "st" %>
        <tr>
          <td><b>SPEECH THERAPIST</b></td>
          <td>
            <% cnt = 1 ; @stel.each do |k,v| %>
              <% if v == nil %>
                <%= "#{cnt}. #{(ek=Ekid.find(k)).name.upcase}" %><br>
                <%= render 'sces/sess', ek: ek %>
              <% cnt = cnt +1 ; end %>
            <% end %>
          </td>
          <td>
            <% cnt = 1 ; @stel.each do |k,v| %>
              <% if v == false %>
                <%= "#{cnt}. #{(ek=Ekid.find(k)).name.upcase}" %><br><br>
              <% cnt = cnt +1 ; end %>
            <% end %>  
          </td>
          <td>
            <% cnt = 1 ; @stel.each do |k,v| %>
              <% if v == true %>
                <%= "#{cnt}. #{(ek=Ekid.find(k)).name.upcase}" %><br><br>
              <% cnt = cnt +1 ; end %>
            <% end %>      
          </td>
        </tr>
      <% end %>

      <% if params[:rm] == "at" %>
        <tr>
          <td><b>AUDIOLOGIST</b></td>
          <td>
            <% cnt = 1 ; @atel.each do |k,v| %>
              <% if v == nil %>
                <%= "#{cnt}. #{(ek=Ekid.find(k)).name.upcase}" %><br>
                <%= render 'sces/sess', ek: ek %>
              <% cnt = cnt +1 ; end %>
            <% end %>
          </td>
          <td>
            <% cnt = 1 ; @atel.each do |k,v| %>
              <% if v == false %>
                <%= "#{cnt}. #{(ek=Ekid.find(k)).name.upcase}" %><br><br>
              <% cnt = cnt +1 ; end %>
            <% end %>  
          </td>
          <td>
            <% cnt = 1 ; @atel.each do |k,v| %>
              <% if v == true %>
                <%= "#{cnt}. #{(ek=Ekid.find(k)).name.upcase}" %><br><br>
              <% cnt = cnt +1 ; end %>
            <% end %>      
          </td>
        </tr>
      <% end %>

      <% if params[:rm] == "pt" %>
        <tr>
          <td><b>PHYSIO THERAPIST</b></td>
          <td>
            <% cnt = 1 ; @ptel.each do |k,v| %>
              <% if v == nil %>
                <%= "#{cnt}. #{(ek=Ekid.find(k)).name.upcase}" %><br>
                <%= render 'sces/sess', ek: ek %>
              <% cnt = cnt +1 ; end %>
            <% end %>
          </td>
          <td>
            <% cnt = 1 ; @ptel.each do |k,v| %>
              <% if v == false %>
                <%= "#{cnt}. #{(ek=Ekid.find(k)).name.upcase}" %><br><br>
              <% cnt = cnt +1 ; end %>
            <% end %>  
          </td>
          <td>
            <% cnt = 1 ; @ptel.each do |k,v| %>
              <% if v == true %>
                <%= "#{cnt}. #{(ek=Ekid.find(k)).name.upcase}" %><br><br>
              <% cnt = cnt +1 ; end %>
            <% end %>      
          </td>
        </tr>
      <% end %>

      <% if params[:rm] == "ot" %>
        <tr>
          <td><b>OCCUPATIONAL THERAPIST</b></td>
          <td>
            <% cnt = 1 ; @otel.each do |k,v| %>
              <% if v == nil %>
                <%= "#{cnt}. #{(ek=Ekid.find(k)).name.upcase}" %><br>
                <%= render 'sces/sess', ek: ek %>
              <% cnt = cnt +1 ; end %>
            <% end %>
          </td>
          <td>
            <% cnt = 1 ; @otel.each do |k,v| %>
              <% if v == false %>
                <%= "#{cnt}. #{(ek=Ekid.find(k)).name.upcase}" %><br><br>
              <% cnt = cnt +1 ; end %>
            <% end %>  
          </td>
          <td>
            <% cnt = 1 ; @otel.each do |k,v| %>
              <% if v == true %>
                <%= "#{cnt}. #{(ek=Ekid.find(k)).name.upcase}" %><br><br>
              <% cnt = cnt +1 ; end %>
            <% end %>      
          </td>
        </tr>
      <% end %>

      <% if params[:rm] == "dt" %>
        <tr>
          <td><b>DOCTOR</b></td>
          <td>
            <% cnt = 1 ; @dtel.each do |k,v| %>
              <% if v == nil %>
                <%= "#{cnt}. #{(ek=Ekid.find(k)).name.upcase}" %><br>
                <%= render 'sces/sess', ek: ek %>
              <% cnt = cnt +1 ; end %>
            <% end %>
          </td>
          <td>
            <% cnt = 1 ; @dtel.each do |k,v| %>
              <% if v == false %>
                <%= "#{cnt}. #{(ek=Ekid.find(k)).name.upcase}" %><br><br>
              <% cnt = cnt +1 ; end %>
            <% end %>  
          </td>
          <td>
            <% cnt = 1 ; @dtel.each do |k,v| %>
              <% if v == true %>
                <%= "#{cnt}. #{(ek=Ekid.find(k)).name.upcase}" %><br><br>
              <% cnt = cnt +1 ; end %>
            <% end %>      
          </td>
        </tr>
      <% end %>


    </tbody>
  </table>
</div>

<script language="javascript" type="text/javascript">
  setTimeout("location.reload();",5000);
</script>